<Window x:Class="BlueCloudK.WpfMusicTilesAI.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Settings - Magic Tiles AI"
        Height="500" Width="600"
        WindowStartupLocation="CenterOwner"
        Background="#0f0f23"
        ResizeMode="NoResize">
    <Grid>
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#0f0f23" Offset="0"/>
                <GradientStop Color="#1a1a2e" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <Grid Margin="30">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <TextBlock Grid.Row="0"
                       Text="âš™ï¸ Settings"
                       FontSize="32"
                       FontWeight="Bold"
                       Foreground="White"
                       Margin="0,0,0,30">
                <TextBlock.Effect>
                    <DropShadowEffect Color="#e94560" BlurRadius="15" ShadowDepth="0"/>
                </TextBlock.Effect>
            </TextBlock>

            <!-- Settings Content -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <StackPanel>

                    <!-- Volume Setting -->
                    <Border Background="#1e293b"
                            CornerRadius="8"
                            Padding="20"
                            Margin="0,0,0,15">
                        <StackPanel>
                            <TextBlock Text="ðŸ”Š Volume"
                                       FontSize="18"
                                       FontWeight="SemiBold"
                                       Foreground="White"
                                       Margin="0,0,0,15"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <Slider Grid.Column="0"
                                        Value="{Binding Volume}"
                                        Minimum="0"
                                        Maximum="1"
                                        TickFrequency="0.1"
                                        IsSnapToTickEnabled="True"
                                        VerticalAlignment="Center"
                                        Margin="0,0,15,0"/>

                                <TextBlock Grid.Column="1"
                                          Text="{Binding Volume, StringFormat={}{0:P0}}"
                                          FontSize="16"
                                          Foreground="White"
                                          VerticalAlignment="Center"
                                          Width="50"
                                          TextAlignment="Right"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Theme Setting -->
                    <Border Background="#1e293b"
                            CornerRadius="8"
                            Padding="20"
                            Margin="0,0,0,15">
                        <StackPanel>
                            <TextBlock Text="ðŸŽ¨ Note Theme"
                                       FontSize="18"
                                       FontWeight="SemiBold"
                                       Foreground="White"
                                       Margin="0,0,0,15"/>

                            <TextBlock Text="Choose the color theme for notes/tiles:"
                                       FontSize="12"
                                       Foreground="#94a3b8"
                                       Margin="0,0,0,10"/>

                            <ComboBox ItemsSource="{Binding AvailableThemes}"
                                     SelectedItem="{Binding SelectedTheme}"
                                     FontSize="14"
                                     Padding="10"
                                     Background="#0f1419"
                                     Foreground="White"
                                     BorderBrush="#e94560"
                                     BorderThickness="2">
                                <ComboBox.Resources>
                                    <Style TargetType="ComboBoxItem">
                                        <Setter Property="Background" Value="#0f1419"/>
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="Padding" Value="10"/>
                                    </Style>
                                </ComboBox.Resources>
                            </ComboBox>

                            <!-- Theme Preview -->
                            <Border Height="60"
                                    Margin="0,15,0,0"
                                    CornerRadius="4"
                                    Background="#0f1419">
                                <StackPanel Orientation="Horizontal"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center">
                                    <!-- Preview tiles -->
                                    <Border Width="40" Height="50"
                                            Margin="5"
                                            CornerRadius="4">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Red">
                                                        <Setter Property="Background" Value="#e94560"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Blue">
                                                        <Setter Property="Background" Value="#3b82f6"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Green">
                                                        <Setter Property="Background" Value="#22c55e"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Purple">
                                                        <Setter Property="Background" Value="#a855f7"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Orange">
                                                        <Setter Property="Background" Value="#f97316"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Pink">
                                                        <Setter Property="Background" Value="#ec4899"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Rainbow">
                                                        <Setter Property="Background">
                                                            <Setter.Value>
                                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                                    <GradientStop Color="#e94560" Offset="0"/>
                                                                    <GradientStop Color="#3b82f6" Offset="0.33"/>
                                                                    <GradientStop Color="#22c55e" Offset="0.66"/>
                                                                    <GradientStop Color="#a855f7" Offset="1"/>
                                                                </LinearGradientBrush>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>
                                    </Border>
                                    <Border Width="40" Height="50"
                                            Margin="5"
                                            CornerRadius="4" Opacity="0.7">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Red">
                                                        <Setter Property="Background" Value="#e94560"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Blue">
                                                        <Setter Property="Background" Value="#3b82f6"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Green">
                                                        <Setter Property="Background" Value="#22c55e"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Purple">
                                                        <Setter Property="Background" Value="#a855f7"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Orange">
                                                        <Setter Property="Background" Value="#f97316"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Pink">
                                                        <Setter Property="Background" Value="#ec4899"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Rainbow">
                                                        <Setter Property="Background">
                                                            <Setter.Value>
                                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                                    <GradientStop Color="#e94560" Offset="0"/>
                                                                    <GradientStop Color="#3b82f6" Offset="0.33"/>
                                                                    <GradientStop Color="#22c55e" Offset="0.66"/>
                                                                    <GradientStop Color="#a855f7" Offset="1"/>
                                                                </LinearGradientBrush>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>
                                    </Border>
                                    <Border Width="40" Height="50"
                                            Margin="5"
                                            CornerRadius="4" Opacity="0.5">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Red">
                                                        <Setter Property="Background" Value="#e94560"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Blue">
                                                        <Setter Property="Background" Value="#3b82f6"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Green">
                                                        <Setter Property="Background" Value="#22c55e"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Purple">
                                                        <Setter Property="Background" Value="#a855f7"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Orange">
                                                        <Setter Property="Background" Value="#f97316"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Pink">
                                                        <Setter Property="Background" Value="#ec4899"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding SelectedTheme}" Value="Rainbow">
                                                        <Setter Property="Background">
                                                            <Setter.Value>
                                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                                    <GradientStop Color="#e94560" Offset="0"/>
                                                                    <GradientStop Color="#3b82f6" Offset="0.33"/>
                                                                    <GradientStop Color="#22c55e" Offset="0.66"/>
                                                                    <GradientStop Color="#a855f7" Offset="1"/>
                                                                </LinearGradientBrush>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>
                                    </Border>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- Speed Setting -->
                    <Border Background="#1e293b"
                            CornerRadius="8"
                            Padding="20"
                            Margin="0,0,0,15">
                        <StackPanel>
                            <TextBlock Text="âš¡ Game Speed"
                                       FontSize="18"
                                       FontWeight="SemiBold"
                                       Foreground="White"
                                       Margin="0,0,0,15"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <Slider Grid.Column="0"
                                        Value="{Binding Speed}"
                                        Minimum="0.5"
                                        Maximum="2.0"
                                        TickFrequency="0.1"
                                        IsSnapToTickEnabled="True"
                                        VerticalAlignment="Center"
                                        Margin="0,0,15,0"/>

                                <TextBlock Grid.Column="1"
                                          Text="{Binding Speed, StringFormat={}{0:F1}x}"
                                          FontSize="16"
                                          Foreground="White"
                                          VerticalAlignment="Center"
                                          Width="50"
                                          TextAlignment="Right"/>
                            </Grid>

                            <TextBlock Text="Higher speed = faster falling notes"
                                       FontSize="11"
                                       Foreground="#64748b"
                                       Margin="0,10,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Visual Effects -->
                    <Border Background="#1e293b"
                            CornerRadius="8"
                            Padding="20"
                            Margin="0,0,0,15">
                        <StackPanel>
                            <TextBlock Text="âœ¨ Visual Effects"
                                       FontSize="18"
                                       FontWeight="SemiBold"
                                       Foreground="White"
                                       Margin="0,0,0,15"/>

                            <CheckBox IsChecked="{Binding EnableEffects}"
                                     Content="Enable particle effects and animations"
                                     Foreground="White"
                                     FontSize="14"
                                     Margin="0,0,0,10"/>

                            <CheckBox IsChecked="{Binding ShowFPS}"
                                     Content="Show FPS counter"
                                     Foreground="White"
                                     FontSize="14"/>
                        </StackPanel>
                    </Border>

                </StackPanel>
            </ScrollViewer>

            <!-- Action Buttons -->
            <Grid Grid.Row="2" Margin="0,20,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Reset Button -->
                <Button Grid.Column="0"
                        Command="{Binding ResetToDefaultsCommand}"
                        Content="Reset to Defaults"
                        FontSize="14"
                        Padding="20,10"
                        Background="#334155"
                        Foreground="White"
                        BorderThickness="0"
                        Cursor="Hand"
                        HorizontalAlignment="Left">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                                CornerRadius="6"
                                                Padding="{TemplateBinding Padding}">
                                            <ContentPresenter HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#475569"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <!-- Cancel Button -->
                <Button Grid.Column="1"
                        Click="CancelButton_Click"
                        Content="Cancel"
                        FontSize="14"
                        Padding="25,10"
                        Background="#334155"
                        Foreground="White"
                        BorderThickness="0"
                        Cursor="Hand"
                        Margin="0,0,10,0">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                                CornerRadius="6"
                                                Padding="{TemplateBinding Padding}">
                                            <ContentPresenter HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#475569"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <!-- Save Button -->
                <Button Grid.Column="2"
                        Command="{Binding SaveCommand}"
                        Click="SaveButton_Click"
                        Content="Save"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Padding="30,10"
                        Background="#e94560"
                        Foreground="White"
                        BorderThickness="0"
                        Cursor="Hand">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                                CornerRadius="6"
                                                Padding="{TemplateBinding Padding}">
                                            <ContentPresenter HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#f76f8e"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>
        </Grid>
    </Grid>
</Window>
